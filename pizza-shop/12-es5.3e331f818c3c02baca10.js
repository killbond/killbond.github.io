function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function _createClass(n,e,r){return e&&_defineProperties(n.prototype,e),r&&_defineProperties(n,r),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{fhSy:function(n,e,r){"use strict";r.r(e),r.d(e,"RegisterModule",(function(){return E}));var i,o=r("ofXK"),t=r("tyNb"),a=r("JIr8"),c=r("nYR2"),s=r("eIep"),d=r("LRne"),b=r("wHSu"),l=r("fXoL"),f=r("H+bZ"),u=((i=function(){function n(e){_classCallCheck(this,n),this.api=e}return _createClass(n,[{key:"register",value:function(n){return this.api.post("users",n)}}]),n}()).\u0275fac=function(n){return new(n||i)(l.Zb(f.a))},i.\u0275prov=l.Ib({token:i,factory:i.\u0275fac,providedIn:"root"}),i),p=r("lGQG"),g=r("3Pt+"),h=r("6NWb");function m(n,e){if(1&n&&(l.Rb(0,"div",14),l.Ec(1),l.Qb()),2&n){var r=e.$implicit;l.zb(1),l.Fc(r)}}function v(n,e){if(1&n&&(l.Rb(0,"div",14),l.Ec(1),l.Qb()),2&n){var r=e.$implicit;l.zb(1),l.Fc(r)}}function w(n,e){if(1&n&&(l.Rb(0,"div",14),l.Ec(1),l.Qb()),2&n){var r=e.$implicit;l.zb(1),l.Fc(r)}}function C(n,e){if(1&n&&(l.Rb(0,"div",14),l.Ec(1),l.Qb()),2&n){var r=e.$implicit;l.zb(1),l.Fc(r)}}function M(n,e){if(1&n&&(l.Rb(0,"div",14),l.Ec(1),l.Qb()),2&n){var r=e.$implicit;l.zb(1),l.Fc(r)}}function y(n,e){if(1&n&&l.Nb(0,"fa-icon",15),2&n){var r=l.fc();l.lc("icon",r.faSpinner)("spin",!0)}}var O,R,_,k=function(){return["/menu"]},P=function(){return["/login"]},Q=[{path:"",component:(O=function(){function n(e,r,i){_classCallCheck(this,n),this.userService=e,this.auth=r,this.router=i,this.faSpinner=b.b,this.errors={},this.sending=!1}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"register",value:function(){var n=this;this.userService.register(this.newUser()).pipe(Object(a.a)(this.errorHandling.bind(this)),Object(c.a)((function(){return n.sending=!1})),Object(s.a)((function(){return n.auth.login(n.email,n.password)})),Object(s.a)((function(){return n.router.navigate(["/menu"])}))).subscribe()}},{key:"errorHandling",value:function(n){var e=n.error;return e.hasOwnProperty("errors")&&(this.errors=e.errors),Object(d.a)()}},{key:"newUser",value:function(){return{name:this.name,password:this.password,password_confirmation:this.passwordConfirmation,email:this.email,phone:this.phone}}}]),n}(),O.\u0275fac=function(n){return new(n||O)(l.Mb(u),l.Mb(p.a),l.Mb(t.a))},O.\u0275cmp=l.Gb({type:O,selectors:[["app-register"]],decls:28,vars:26,consts:[[1,"register-form"],[3,"ngSubmit"],[1,"text-center"],[1,"form-group"],["name","name","placeholder","Name","required","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["class","invalid-feedback",4,"ngFor","ngForOf"],["name","email","placeholder","Email","required","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","phone","placeholder","Phone","required","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","password","placeholder","Password","required","","type","password",1,"form-control",3,"ngModel","ngModelChange"],["name","password_confirmation","placeholder","Password confirmation","required","","type","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[3,"icon","spin",4,"ngIf"],[1,"d-flex","justify-content-around"],[3,"routerLink"],[1,"invalid-feedback"],[3,"icon","spin"]],template:function(n,e){1&n&&(l.Rb(0,"div",0),l.Rb(1,"form",1),l.dc("ngSubmit",(function(){return e.register()})),l.Rb(2,"h2",2),l.Ec(3,"Log in"),l.Qb(),l.Rb(4,"div",3),l.Rb(5,"input",4),l.dc("ngModelChange",(function(n){return e.name=n})),l.Qb(),l.Cc(6,m,2,1,"div",5),l.Qb(),l.Rb(7,"div",3),l.Rb(8,"input",6),l.dc("ngModelChange",(function(n){return e.email=n})),l.Qb(),l.Cc(9,v,2,1,"div",5),l.Qb(),l.Rb(10,"div",3),l.Rb(11,"input",7),l.dc("ngModelChange",(function(n){return e.phone=n})),l.Qb(),l.Cc(12,w,2,1,"div",5),l.Qb(),l.Rb(13,"div",3),l.Rb(14,"input",8),l.dc("ngModelChange",(function(n){return e.password=n})),l.Qb(),l.Cc(15,C,2,1,"div",5),l.Qb(),l.Rb(16,"div",3),l.Rb(17,"input",9),l.dc("ngModelChange",(function(n){return e.passwordConfirmation=n})),l.Qb(),l.Cc(18,M,2,1,"div",5),l.Qb(),l.Rb(19,"div",3),l.Rb(20,"button",10),l.Cc(21,y,1,2,"fa-icon",11),l.Ec(22," Register "),l.Qb(),l.Qb(),l.Qb(),l.Rb(23,"div",12),l.Rb(24,"a",13),l.Ec(25,"Back to menu"),l.Qb(),l.Rb(26,"a",13),l.Ec(27,"Log in"),l.Qb(),l.Qb(),l.Qb()),2&n&&(l.zb(5),l.Eb("is-invalid",e.errors.hasOwnProperty("name")),l.lc("ngModel",e.name),l.zb(1),l.lc("ngForOf",e.errors.name),l.zb(2),l.Eb("is-invalid",e.errors.hasOwnProperty("email")),l.lc("ngModel",e.email),l.zb(1),l.lc("ngForOf",e.errors.email),l.zb(2),l.Eb("is-invalid",e.errors.hasOwnProperty("phone")),l.lc("ngModel",e.phone),l.zb(1),l.lc("ngForOf",e.errors.phone),l.zb(2),l.Eb("is-invalid",e.errors.hasOwnProperty("password")),l.lc("ngModel",e.password),l.zb(1),l.lc("ngForOf",e.errors.password),l.zb(2),l.Eb("is-invalid",e.errors.hasOwnProperty("password_confirmation")),l.lc("ngModel",e.passwordConfirmation),l.zb(1),l.lc("ngForOf",e.errors.password_confirmation),l.zb(2),l.lc("disabled",e.sending),l.zb(1),l.lc("ngIf",e.sending),l.zb(3),l.lc("routerLink",l.oc(24,k)),l.zb(2),l.lc("routerLink",l.oc(25,P)))},directives:[g.m,g.f,g.g,g.a,g.k,g.e,g.h,o.j,o.k,t.b,h.a],styles:["@media (max-width:425px){.register-form[_ngcontent-%COMP%]{width:calc(100vw - 10%)}}@media (min-width:425px){.register-form[_ngcontent-%COMP%]{width:360px}}.register-form[_ngcontent-%COMP%]{margin:10vh auto 0;font-size:15px}.register-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:15px;background:#f7f7f7;box-shadow:0 2px 2px rgba(0,0,0,.3);padding:30px}.register-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 15px}.btn[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{min-height:38px;border-radius:2px}.btn[_ngcontent-%COMP%]{font-size:15px;font-weight:700}"]}),O)}],z=((R=function n(){_classCallCheck(this,n)}).\u0275mod=l.Kb({type:R}),R.\u0275inj=l.Jb({factory:function(n){return new(n||R)},imports:[[t.c.forChild(Q)],t.c]}),R),x=r("d2mR"),E=((_=function n(){_classCallCheck(this,n)}).\u0275mod=l.Kb({type:_}),_.\u0275inj=l.Jb({factory:function(n){return new(n||_)},imports:[[o.b,z,g.b,h.d,x.a]]}),_)}}]);